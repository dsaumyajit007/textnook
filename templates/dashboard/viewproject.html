
{% extends 'base/base.html' %}
{% load staticfiles %}
{% block title %}
{{projectName}} - {{projectUsername}}
{% endblock %}

{% block content %}
{% csrf_token %}
<div class='row'>
	<div class='col m6 s12'>
		<h3><p class="z-depth-2">Project Title</h3>

		<h4><blockquote>{{projectName}}</blockquote></h4>

		<h3><p class="z-depth-2">Project Description</p></h3>

		<h5><blockquote>{{projectDescription}}</blockquote></h5>

		<h3><p class="z-depth-2">Project Technologies</p></h3>

		{% if skillList|length == 0 %}
		<blockquote>None</blockquote>
		{% else %}
		{% for skills in skillList %}
		<blockquote>{{skills.skillName}}</blockquote>			
		{% endfor%}
		{% endif %}

		<h3><p class="z-depth-2">Project Contributors</p></h3>

		
		{% for contributors in contributorList %}
		<blockquote>{{contributors.username}}</blockquote>			
		{% endfor%}
		

	</div>
	{% if fileList|length > 0 %}
	<div class="col offset-m1 s12 m5">
		<h4><blockquote>Documents</blockquote></h4>
		<ul class="collection ">
			{% for file in fileList%}
			<li class="collection-item"><div><a target="_blank" href="../../media/{{file.document.name}}">{{file.documentName}}</a><a href="#" class="secondary-content deleteFile"  documentPath="{{file.document.path}}" projectId="{{projectId}}"><i class="material-icons">delete</i></a></div></li>
			{% endfor %}
		</ul>
	</div>
	{% endif %}
</div>
{% if isOwner == True %}
<div class="fixed-action-btn" >
	<a class="btn-floating btn-large teal">
		<i class="large material-icons">mode_edit</i>
	</a>
	<ul>
		<li><a class="btn-floating red btn tooltipped" id="editProjectName"data-position="left" data-delay="50" data-tooltip="Change Project Name" projectName='{{projectName}}' projectId={{projectId}}><i class="material-icons">mode_edit</i></a></li>
		<li><a class="btn-floating green btn tooltipped" data-position="left" id="editProjectDescription"data-delay="50" data-tooltip="Change Project Description" projectId={{projectId}} projectDescription='{{projectDescription}}'><i class="material-icons">mode_comment</i></a></li>
		<li><a class="btn-floating purple btn tooltipped" data-position="left"  id="addFiles" data-delay="50" data-tooltip="Add Files" projectId={{projectId}}><i class="large material-icons">publish</i></a></li>
		<li><a class="btn-floating orange btn tooltipped" data-position="left" id="editContributors" data-delay="50" data-tooltip="Edit contributors" projectId={{projectId}}><i class="material-icons">group_add</i></a></li>
		<li><a class="btn-floating yellow btn tooltipped" data-position="left" id="editSkills" data-delay="50" data-tooltip="Edit Technologies" projectId={{projectId}}><i class="material-icons">build</i></a></li>

	</ul>
</div>



<div id="editProjectNameModal" class="modal bottom-sheet">
	<div class="modal-content">
		<h4 class='modal-header'>Project Name</h4>
		<div class = "row">
			<div class="input-field col s5">
				<input type="text" class="validate" name="projectNameChange" id="projectNameChange"required="true">
			</div>
		</div>

	</div>


	<div class="modal-footer">
		<a class="waves-effect waves-light btn green" id="editProjectNameBtn"><i class="material-icons right">done</i>Change</a>
	</div>
</div>


<div id="editProjectDescriptionModal" class="modal bottom-sheet">
	<div class="modal-content">
		<h4 class='modal-header'>Project Description</h4>
		<div class = "row">
			<div class="input-field col s5">
				<input type="text" class="validate" name="projectDescriptionChange" id="projectDescriptionChange"required="true">
			</div>
		</div>

	</div>


	<div class="modal-footer">
		<a class="waves-effect waves-light btn green" id="editProjectDescriptionBtn"><i class="material-icons right">done</i>Change</a>
	</div>
</div>



<div id="addFilesModal" class="modal bottom-sheet">
	<div class="modal-content">

		<form method="POST" action="{% url 'dashboard:uploadFiles' %}" enctype="multipart/form-data">

			{% csrf_token %}
			<input type="hidden" name="projectId" value="{{projectId}}">
			<div class="row">
				<div class="col s12 m6">
					<div class="file-field input-field">
						<div class="btn">
							<span>File</span>
							<input type="file" name="uploadedFile" id="uploadedFile">
						</div>
						<div class="file-path-wrapper">
							<input class="file-path validate" type="text" placeholder="Upload one or more files">
						</div>
					</div>

				</div>
				<div class="col s12 m6">
					<div class="input-field">
						<input type="text" class="validate" name="documentName" id="documentName"required="true" placeholder="Other poeple will see this name">
						<label for="projectName">Document Name</label>
					</div>
				</div>
				
			</div>

			<div class="modal-footer">
				<input type="submit" class="validate btn green darken-4" name = "Upload">
			</div>
		</form>

	</div>
</div>



<div id="editSkillsModal" class="modal modal-fixed-footer">
	<div class="modal-content">


		<h4>Technologies Used</h4>
		<table id="editSkillsTable">
			<thead>
				<tr>
					<th>Technologies</th>
					<th>Working with</th>
				</tr>
			</thead>

			<tbody>
				{% for skill in addSkills %}
				<tr>
					<td>{{skill.skill.skillName}}</td>
					<td>
						<div class="switch">
							<label>
								Yes
								<input type="checkbox" 
								{% if skill.belongs == 1 %}
									checked
								{% endif %} skillId="{{skill.skill.id}}"
								 >
								<span class="lever"></span>
								No
							</label>
						</div>
					</td>

				</tr>



				{% endfor %}

			</tbody>
		</table>
	</div>

	<div class="modal-footer">
		<a class="waves-effect waves-light btn green" projectId={{projectId}} id="editSkillsBtn"><i class="material-icons right">done</i>Change</a>	</div>


	</div>

</div>





<div id="editContributorsModal" class="modal modal-fixed-footer">
	<div class="modal-content">

		
			<h4>Contributors</h4>
			<table id="editContributorsTable">
				<thead>
					<tr>
						<th>Users</th>
						<th>Working with</th>
					</tr>
				</thead>

				<tbody>
					{% for user in addContributors %}
					<tr>
						<td>{{user.user.username}} {% if user.user.username == username%}(Me){% endif %}</td>
						<td>
							<div class="switch">
								<label>
									Yes
									<input type="checkbox" username={{user.user.username}} {% if user.user.username == username%}checked disabled{% endif %}>
									<span class="lever"></span>
									No
								</label>
							</div>
						</td>

					</tr>



					{% endfor %}

				</tbody>
			</table>
		
	</div>

	<div class="modal-footer">
		<a class="waves-effect waves-light btn green" projectId={{projectId}} id="editContributorsBtn"><i class="material-icons right">done</i>Change</a>	</div>


	</div>


</div>



{% endif %}

<script type="text/javascript" src = "{% static 'js/dashboard/main.js' %}"></script>

{% endblock %}